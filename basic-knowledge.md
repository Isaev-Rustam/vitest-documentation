# Основы тестирования

По умолчанию файлы для тестирования должны иметь следующий вид `**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}`
Изменить его можно изменив настройки в файле `vitest.config.ts` добавив поле `include` с нужным шаблоном.

Основные ключевые слова
- describe - позволяет объединить тесты по какому-либо признаку
- it - функция, описывающая один тест
- expect - функция, проверяющая ожидаемое значение с реальным

Пример использования
```typescript
//isSortedDescendant.test.ts
import { describe, it, expect } from "vitest";
import { isSortedDescendant } from "./isSortedDescendant";

describe('isSortedDescendant tests', () => {
  it('expect true', () => {
    const array = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
    expect(isSortedDescendant(array)).toBeTruthy();
  })

  it('expect false', () => {
    const array = [10, 90, 8, 7, 6, 5, 4, 3, 2, 1];
    expect(isSortedDescendant(array)).toBeFalsy();
  })
})
```

## Возможности _**expect**_
После `expect(testingValue)` через точку нужно указать одну из следующих функций для сравнения
- toMatch() -проверяет, равна ли строка указанному значению (Regex может использоваться как указанное значение!).
- toContain() - проверяет, содержит ли массив указанное значение.
- not.toBe(2) -Если это не так, утверждение выдаст ошибку, и тест завершится неудачей.
- toBe() -Сравнивает примитивы.
- toEqual([['a'],{a:'b'}]) -Сравнивает сложные значения. Сравнивает объекты рекурсивно проверяя структуру.
- toBeCloseTo() -проверяет, равно ли число заданному значению с небольшим допуском (полезно для чисел с плавающей запятой).
- toBeTruthy() -проверяет, что переменная/выражение истинно.
- toBeFalsy() -проверяет, что переменная/оператор ложны.
- toBeNull() -проверяет, соответствует ли переменная только нулю.
- toBeUndefined() -проверяет, не определена ли переменная.
- toBeDefined() -проверяет, определена ли переменная.
- toBeGreaterThan() -проверяет, больше ли число указанного значения.
- toBeGreaterThanOrEqual() -проверяет, является ли число большим или равным указанному значению.
- toBeLessThan() -проверяет, меньше ли число указанного значения.
- toBeLessThanOrEqual() -проверяет, меньше или равно число указанному значению.
- toBe(actualValue)  -`actualValue` проверяет примитивные выходные значения.
- toEqual(actualValue) -`testingValue` проверяет объекты на соответствие.
- toMatchObject(actualValue) -позволяет сравнивать объекты неполным вхождением.
- toThrowError() -проверяет, что было выброшено исключение.
- resolves() rejects() -проверяет, что промис завершился с указанным статусом.
- arrayContaining(actualValue) -проверяет, что в массиве есть все перечисленные элементы.
- toHaveBeenCalledTimes || toBeCalledTimes(number) -проверяет, вызывалась ли функция определенное количество раз.
- toHaveBeenCalledWith || toBeCalledWith(number) - была ли функция вызвана хотя бы один раз с определенными параметрами.
- resolves - Используйте его, чтобы развернуть значение из ожидающего обещания и подтвердить его значение с помощью обычных утверждений.
- rejects -Используйте его, чтобы раскрыть причину, по которой обещание было отклонено, и подтвердить его значение с помощью обычных утверждений.

## Управление запускаемыми тестами
- `describe.only` - запускает только этот блок с тестами
- `describe.skip` - не запускает это блок с тестами
- `describe.todo` - для заглушек ненаписанных тестов
- `describe.skipIf` - пропускает тест, если условие выполняется

## Действия перед/после тестов
- `beforeEach` - выполняется перед каждым тестом
- `beforeAll` - выполняется один раз перед всеми тестами
- `afterEach` - выполняется после каждого теста 
- `afterAll` - выполняется один раз после всех тестов

## Доп опции
- `describe.each` - позволяет передать набор данных, которые будут использоваться во всех тестах внутри блока
